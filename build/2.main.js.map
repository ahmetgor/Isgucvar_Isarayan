{"version":3,"sources":["../../src/pages/detay/detay.module.ts","../../src/pages/detay/detay.ts"],"names":[],"mappings":"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","file":"2.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { DetayPage } from './detay';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    DetayPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(DetayPage),\r\n  ],\r\n  exports: [\r\n    DetayPage\r\n  ]\r\n})\r\nexport class DetayPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/detay/detay.module.ts","import { Component } from '@angular/core';\r\nimport { NavController, NavParams, Platform, ActionSheetController, IonicPage, Events } from 'ionic-angular';\r\nimport { BasvuruSer } from '../../providers/basvuru-ser';\r\nimport { IlanSer } from '../../providers/ilan-ser';\r\nimport { SocialSharing } from '@ionic-native/social-sharing';\r\n// import { FacebookService, InitParams,  UIParams, UIResponse } from 'ngx-facebook';\r\n// import { Facebook } from '@ionic-native/facebook';\r\nimport { UserAuth } from '../../providers/user-auth';\r\nimport { SonucPage } from '../sonuc/sonuc';\r\nimport { LoginPage } from '../login/login';\r\n// import { LinkedIn } from '@ionic-native/linkedin';\r\n\r\ndeclare var IN;\r\ndeclare var FB;\r\n\r\n@IonicPage({\r\n    segment: 'detay/:ilanId'\r\n})\r\n@Component({\r\n  selector: 'page-detay',\r\n  templateUrl: 'detay.html'\r\n})\r\nexport class DetayPage {\r\n\r\nilan: any;\r\nbasvuruList: Array<any>;\r\nkaydedilenList: Array<any>;\r\nilanId: string;\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams,\r\n              public ilanSer: IlanSer, public basvuruSer: BasvuruSer, public events: Events,\r\n              private socialSharing: SocialSharing, public authService: UserAuth,\r\n              // private fb: FacebookService,private face: Facebook,\r\n              public plt: Platform,\r\n              public actionSheetCtrl: ActionSheetController) {\r\n\r\n  //  this.ilan = this.navParams.get('ilan');\r\n  if (!this.authService.currentUser) {\r\n  this.authService.checkAuthentication().then((res) => {\r\n  }, (err) => {\r\n    this.navCtrl.setRoot(LoginPage);\r\n  });\r\n}\r\n   // this.basvuruList = this.navParams.get('basvurulist');\r\n   // this.kaydedilenList = this.navParams.get('kaydedilenlist');\r\n   this.basvuruList = this.basvuruSer.basvuruList;\r\n   this.kaydedilenList = this.basvuruSer.kaydedilenList;\r\n   this.ilanId = this.navParams.get('ilanId');\r\n\r\n   // console.log(this.ilanId+\"ilanId\");\r\n  //  this.basvuruList.push({id: 'hebe'});\r\n   // console.log(JSON.stringify(this.kaydedilenList)+'detay basvuru');\r\n\r\n  // if(this.ilanId) {\r\n    ilanSer.getIlan(this.ilanId)\r\n    .then((ilan) => {this.ilan = ilan;\r\n    // console.log(JSON.stringify(this.ilan)+\"link ilan\");\r\n  });\r\n\r\n    // let initParams: InitParams = {\r\n    //   appId: '112498582687614',\r\n    //   xfbml: true,\r\n    //   version: 'v2.9'\r\n    // };\r\n    //\r\n    // fb.init(initParams);\r\n    //  face.browserInit(112498582687614, 'v2.9');\r\n  }\r\n\r\n  shareFace() {\r\n    let options = \t{\r\n  method: \"share\",\r\n\thref: window.location.origin+'/#/detay/'+this.ilan._id,\r\n\tcaption: \"Such caption, very feed.\",\r\n\tdescription: \"Much description\"\r\n\t// picture: this.ilan.resim\r\n}\r\n// let params: UIParams = {\r\n//   href: window.location.origin+'/#/detay/'+this.ilan._id,\r\n//   method: 'share'\r\n// };\r\n\r\n// console.log(\"share face\");\r\n    // this.face.showDialog( options)\r\n    // .then((res) => // console.log(res)+\"res\")\r\n    // .catch((e: any) => console.error(e)+\"error\");\r\n\r\n  FB.ui({\r\n  method: 'share',\r\n  href: window.location.origin+'/#/detay/'+this.ilan._id,\r\n}, function(response){});\r\n\r\n  //     this.fb.ui(params)\r\n  //     .then((res: UIResponse) => // console.log(res))\r\n  //     .catch((e: any) => console.error(e));\r\n  }\r\n\r\n  shareLinked(){\r\n\r\nvar payload = {\r\n  \"comment\": \"Yeni bir İşgüçvar ilanı!\" + window.location.origin+'/#/detay/'+this.ilan._id,\r\n  \"visibility\": {\r\n    \"code\": \"anyone\"\r\n  }\r\n};\r\n\r\nIN.API.Raw(\"/people/~/shares?format=json\")\r\n  .method(\"POST\")\r\n  .body(JSON.stringify(payload))\r\n  .result((onSuccess) =>{})\r\n  .error((onError) =>{});\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    // console.log('ionViewDidLoad DetayPage');\r\n    //Deeplink\r\n    if(!this.ilan) {\r\n      this.ilanSer.getIlan(this.ilanId)\r\n      .then((ilan) => this.ilan = ilan)\r\n    }\r\n\r\n    if (!this.authService.currentUser) {\r\n    this.authService.checkAuthentication().then((res) => {\r\n    }, (err) => {\r\n      this.navCtrl.setRoot(LoginPage);\r\n    });\r\n  }\r\n  }\r\n\r\n  getDays(d1) {\r\n    // // console.log(Date.parse(d1)+' date');\r\n    let diff =  Math.floor(( (new Date()).getTime() - Date.parse(d1) ) / 86400000);\r\n    return diff;\r\n  }\r\n\r\n  basvur(ilan :any) {\r\n    // console.log(ilan._id+'detay');\r\n    this.basvuruSer.addBasvuru(ilan._id);\r\n    // console.log(JSON.stringify(this.basvuruSer.basvuruList)+'create');\r\n    this.events.publish('basvur:update');\r\n\r\n  //   // console.log( JSON.stringify(this.basvuruList.find((item) => {\r\n  //       return (item.basvuru == ilanId ); })) + 'console')\r\n  //\r\n  // let i = this.basvuruList.findIndex((item) => {\r\n  //   return (item.basvuru == ilanId); })\r\n  //\r\n  //   if(i>-1)\r\n  //   this.basvuruList[i].basvuruldu = this.basvuruList[i].basvuruldu == 'N' ? 'Y' : 'N';\r\n  //   else this.basvuruList.push({basvuru: ilanId, basvuruldu: 'Y', kaydedildi: 'N'});\r\n  }\r\n\r\n  deleteBasvur(ilan: any) {\r\n    // console.log(ilan._id+'detay');\r\n    this.basvuruSer.deleteBasvuru(ilan._id);\r\n    // console.log(JSON.stringify(this.basvuruSer.basvuruList)+'detay');\r\n    this.events.publish('basvur:update');\r\n\r\n\r\n  }\r\n\r\n  kaydet(ilan :any) {\r\n    this.basvuruSer.addKaydedilen(ilan._id);\r\n    // console.log(JSON.stringify(this.basvuruSer.kaydedilenList)+'create');\r\n    this.events.publish('kaydet:update');\r\n\r\n\r\n  }\r\n\r\n  deleteKaydet(ilan :any) {\r\n    this.basvuruSer.deleteKaydedilen(ilan._id);\r\n    // console.log(JSON.stringify(this.basvuruSer.kaydedilenList)+'detay');\r\n    this.events.publish('kaydet:update');\r\n\r\n  }\r\n\r\n  checkBasvuru(ilanId: any) {\r\n    // // console.log(JSON.stringify(this.basvuruList)+'detaylist');\r\n    return this.basvuruSer.checkBasvuru(ilanId);\r\n  }\r\n\r\n  checkKaydedilen(ilanId: any) {\r\n    return this.basvuruSer.checkKaydedilen(ilanId);\r\n  }\r\n\r\n  presentActionSheet() {\r\n      let actionSheet = this.actionSheetCtrl.create({\r\n        title: 'İlan Paylaş',\r\n        buttons: [\r\n          {\r\n            text: 'Facebook',\r\n            icon: 'logo-facebook',\r\n            handler: () => {\r\n              this.shareFace();\r\n            }},\r\n            // {\r\n            // text: 'LinkedIn',\r\n            // icon: 'logo-linkedin',\r\n            // handler: () => {\r\n            //   // // console.log('Archive clicked');\r\n            //   this.shareLinked();\r\n            // }},\r\n            {\r\n            text: 'İptal',\r\n            role: 'cancel',\r\n            icon: 'close',\r\n            handler: () => {\r\n              // // console.log('Cancel clicked');\r\n            }  }\r\n        ]\r\n      });\r\n      actionSheet.present();\r\n    }\r\n\r\nshare() {\r\n  if(this.plt.is('ios') || this.plt.is('android')) {\r\nvar options = {\r\n  message: \"İşgüçvar ilanına bir göz atın:\\n\", // not supported on some apps (Facebook, Instagram)\r\n  // subject: 'the subject', // fi. for email\r\n  // files: [this.ilan.resim], // an array of filenames either locally or remotely\r\n  url: window.location.origin+\"/#/ilan/\"+this.ilan._id,\r\n  chooserTitle: 'Uygulama seçin:' // Android only, you can override the default share sheet title\r\n}\r\n// this.socialSharing.shareViaFacebookWithPasteMessageHint('Message via Facebook', null, \"https://isgucvar.herokuapp.com/\", \"paste it\")\r\n// this.socialSharing.share('message', 'subject', this.ilan.resim, 'https://www.website.com/foo/#bar?a=b')\r\nthis.socialSharing.shareWithOptions(options)\r\n.then((result) => {\r\n    // console.log(\"Share completed? \" + result.completed); // On Android apps mostly return false even while it's true\r\n    // console.log(\"Shared to app: \" + result.app); // On Android result.app is currently empty. On iOS it's empty when sharing is cancelled (result.completed=false)\r\n}).catch((msg) => {\r\n    // console.log(\"Sharing failed with message: \" + msg);\r\n});\r\n}\r\nelse this.presentActionSheet();\r\n}\r\n\r\n  // checkKaydet(ilanId) {\r\n  //   return this.basvuruList.findIndex((item) => {\r\n  //       return (item.id == ilanId && item.kaydedildi == 'Y' ); }) > -1\r\n  // }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/detay/detay.ts"],"sourceRoot":""}